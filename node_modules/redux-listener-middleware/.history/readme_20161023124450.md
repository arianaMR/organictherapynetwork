# Redux Listener Middleware

A Redux middleware that acts as a gerneral listener on actions
that are dispatched to the Redux store.

## installing the middleware

The middleware itself can handle multiple listeners at the same time,
so it needs to be applied only once 

```js
import listen from 'redux-listener-middleware';

const middleware = listen(); //get a new instance of the middleware

const store = createStore( //redux default
  reducer, // your very own reducer
  applyMiddleware( // redux standard
    thunk, // other middleware probably should be chained BEFORE the interceptor
    middleware // interceptor middleware
  )
);
```

## creating a listener

As a second step, the middleware can be augmented with listeners working
on incoming actions.

```js
const middleware = listen(); // we've seen this berfore
middleware.createListener((action, dispatch) => {
  doSomethingWithThe(action)
    .then(res => dispatch())
});
const interceptor = createInterceptor('fetch', (type, payload, dispatch) => {
  dispatch({type: 'add-loading:' + type})
  fetch(payload.url, payload)
    .then(res => res.json())
    .then(data => dispatch({type:'remove-loading:' + type}) && dispatch({type:'result:' + type, payload: data}));
});

interceptor.addRule('get:user',  action => `/api/users/${action.payload.id}`);
dispatch({
  type: 'get:user',
  payload: {
    id: 1
  }
});


```
